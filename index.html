<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<title>Dopis pro mami</title>
<style>
  body {
    background: #fff8f0;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
    flex-direction: column;
  }
  .envelope-closed, .envelope-open {
    width: 400px;
    height: 300px;
    border-radius: 15px;
    box-shadow: 0 8px 15px rgba(0,0,0,0.2);
    cursor: pointer;
    user-select: none;
    position: relative;
    background: #f7e1d7;
    border: 3px solid #ff99cc;
    box-sizing: border-box;
    padding: 20px;
  }
  .envelope-closed {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 30px;
    color: #d94c7c;
    font-weight: bold;
    transition: transform 0.6s ease, opacity 0.5s ease;
  }
  .envelope-closed:hover {
    transform: scale(1.05);
  }
  .envelope-open {
    opacity: 0;
    pointer-events: none;
    flex-direction: column;
  }
  .letter {
    font-size: 24px;
    color: #d94c7c;
    white-space: pre-wrap;
    line-height: 1.4;
    min-height: 150px;
  }
  .cake {
    margin: 20px auto 0 auto;
    width: 120px;
    height: 120px;
    background: linear-gradient(to top, #ff6699 0%, #ff99cc 100%);
    border-radius: 30px 30px 10px 10px;
    position: relative;
    box-shadow: 0 5px 10px #cc6699;
  }
  .candle {
    width: 10px;
    height: 40px;
    background: yellow;
    position: absolute;
    top: -40px;
    border-radius: 3px;
    animation: flicker 0.3s infinite alternate;
    left: 50%;
    margin-left: -5px;
  }
  @keyframes flicker {
    from {opacity: 1;}
    to {opacity: 0.6;}
  }
  .flame {
    width: 10px;
    height: 15px;
    background: orange;
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    position: absolute;
    top: -25px;
    left: 0;
    animation: flameMove 1s infinite alternate;
    transition: opacity 0.5s ease;
  }
  @keyframes flameMove {
    0% {transform: translateY(0);}
    100% {transform: translateY(-5px);}
  }
  #wishContainer {
    margin-top: 20px;
    text-align: center;
    display: none;
  }
  #wishInput {
    font-size: 18px;
    padding: 8px;
    width: 80%;
    border-radius: 8px;
    border: 2px solid #ff99cc;
    outline: none;
  }
  #blowButton {
    margin-top: 10px;
    padding: 10px 20px;
    background: #ff6699;
    border: none;
    border-radius: 8px;
    color: white;
    font-size: 18px;
    cursor: pointer;
  }
  #blowButton:hover {
    background: #ff3380;
  }
  .happy-birthday {
    margin-top: 30px;
    font-size: 48px;
    font-weight: bold;
    color: #ff3399;
    animation: blink 1s infinite;
    display: none;
  }
  @keyframes blink {
    0%, 50%, 100% {opacity: 1;}
    25%, 75% {opacity: 0.3;}
  }
  /* Animace zav≈ôen√≠ dopisu */
  .close-envelope {
    animation: closeEnvelopeAnim 1s forwards;
  }
  @keyframes closeEnvelopeAnim {
    0% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: scale(0.5) rotate(720deg);
      opacity: 0;
    }
  }
</style>
</head>
<body>

  <div class="envelope-closed" id="closed">
    üì© Klikni na mƒõ a otev≈ôi dopis!
  </div>

  <div class="envelope-open" id="open">
    <div class="letter" id="letter"></div>
    <div class="cake">
      <div class="candle" id="candle">
        <div class="flame" id="flame"></div>
      </div>
    </div>

    <div id="wishContainer">
      <input type="text" id="wishInput" placeholder="Napi≈° svoje p≈ô√°n√≠ tady..." maxlength="50" />
      <br />
      <button id="blowButton">Sfoukni sv√≠ƒçky!</button>
    </div>
  </div>

  <div class="happy-birthday" id="happyText">Happy Birthday!!! üéâüéÇüéà</div>

<script>
  const message = `Ahoj mami,\n
Dnes m√°≈° narozeniny!\n
P≈ôeju ti hodnƒõ ≈°tƒõst√≠,\n
zdrav√≠ a l√°sky.\n\n
Happy Birthday! üéÇüéâ`;

  const closed = document.getElementById('closed');
  const open = document.getElementById('open');
  const letter = document.getElementById('letter');
  const wishContainer = document.getElementById('wishContainer');
  const wishInput = document.getElementById('wishInput');
  const blowButton = document.getElementById('blowButton');
  const flame = document.getElementById('flame');
  const candle = document.getElementById('candle');
  const happyText = document.getElementById('happyText');

  let i = 0;

  function typeWriter() {
    if (i < message.length) {
      letter.textContent += message.charAt(i);
      i++;
      setTimeout(typeWriter, 100);
    } else {
      // Po dops√°n√≠ textu zobraz√≠me p≈ô√°n√≠
      wishContainer.style.display = 'block';
      wishInput.focus();
    }
  }

  closed.addEventListener('click', () => {
    closed.style.transition = 'opacity 0.5s ease';
    closed.style.opacity = '0';
    setTimeout(() => {
      closed.style.display = 'none';
      open.style.opacity = '1';
      open.style.pointerEvents = 'auto';
      typeWriter();
    }, 500);
  });

  blowButton.addEventListener('click', () => {
    const wish = wishInput.value.trim();
    if (wish === '') {
      alert('Napi≈° pros√≠m svoje p≈ô√°n√≠!');
      wishInput.focus();
      return;
    }
    // P≈ôid√°me p≈ô√°n√≠ do dopisu pod p≈Øvodn√≠ text
    letter.textContent += `\n\nTvoje p≈ô√°n√≠:\n${wish}`;

    // Schov√°me p≈ô√°n√≠ a tlaƒç√≠tko
    wishContainer.style.display = 'none';

    // Sfoukneme sv√≠ƒçky - zmiz√≠ plam√≠nek
    flame.style.opacity = '0';

    // Zav≈ôeme dopis animac√≠
    open.classList.add('close-envelope');

    // Po animaci zav≈ôen√≠ uk√°≈æeme Happy Birthday text
    setTimeout(() => {
      open.style.display = 'none';
      happyText.style.display = 'block';
    }, 1000);
  });
</script>

</body>
</html>
